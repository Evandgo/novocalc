<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web App de Aeronaves</title>
    <style>
        /* Estilos CSS incorporados */
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #10004f;
        }

        h1, h2 {
            color: #10004f;
            text-align: center;
        }

        .login-screen, .dashboard {
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        input[type="text"], select {
            max-width: 600px;
            width: 100%;
            padding: 5px;
            margin: 20px 0;
            border: 1px solid #10004f;
            border-radius: 8px;
        }

        button {
            width: 100%;
            padding: 10px;
            background-color: #10004f;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
        }

        button:hover {
            background-color: #10004f;
        }

        .result {
            margin-top: 20px;
        }

        #error-message, #hoursError {
            color: red;
            text-align: center;
        }

        .box-criticos {
            font-weight: bold;
            color: red;
        }
        
        .box-ganhos {
            font-weight: bold;
            color: green;
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div class="login-screen">
        <h1>Login</h1>
        <input type="text" id="userId" placeholder="Insira seu ID">
        <button onclick="validateId()">Login</button>
        <div id="error-message" style="display: none;">ID incorreto, tente novamente!</div>
    </div>

    <!-- Tela com detalhes após login -->
    <div class="dashboard" style="display: none;">
        <h1></h1>
        <img src="./img/Latam_2.PNG" alt="Logo Latam" style="display: block; margin: 0 auto; max-width: 100%; height: auto;">
        <label for="airportSelect">Escolha o aeroporto:</label>
        <select id="airportSelect" onchange="updateVariables()">
            <option value="">--Selecione--</option>
            <option value="BSB">BSB</option>
            <option value="GIG">GIG</option>
            <option value="CNF">CNF</option>
            <option value="IGU">IGU</option>
            <option value="GRU">GRU</option>
        </select>

        <div id="boxCriticos" style="margin-top: 20px; font-weight: bold; color: red;"></div>
        <div id="boxGanhos" style="margin-top: 10px; font-weight: bold; color: green;"></div>

        <label for="aircraftSelect">Escolha a matrícula da aeronave:</label>
        <select id="aircraftSelect" onchange="updateVariables()" style="margin-top: 20px;">
            <option value="">--Selecione--</option>
            <option value="PR-ABB">PR-ABB</option>
            <option value="PR-ABD">PR-ABD</option>
            <option value="PR-ACO">PR-ACO</option>
            <option value="PR-ADY">PR-ADY</option>
            <option value="PR-MAG">PR-MAG</option>
            <option value="PR-MAK">PR-MAK</option>
            <option value="PR-MBA">PR-MBA</option>
            <option value="PR-MBF">PR-MBF</option>
            <option value="PR-MBG">PR-MBG</option>
            <option value="PR-MBH">PR-MBH</option>
            <option value="PR-MBN">PR-MBN</option>
            <option value="PR-MBT">PR-MBT</option>
            <option value="PR-MBU">PR-MBU</option>
            <option value="PR-MBV">PR-MBV</option>
            <option value="PR-MBW">PR-MBW</option>
            <option value="PR-MHA">PR-MHA</option>
            <option value="PR-MHB">PR-MHB</option>
            <option value="PR-MHE">PR-MHE</option>
            <option value="PR-MHF">PR-MHF</option>
            <option value="PR-MHG">PR-MHG</option>
            <option value="PR-MHI">PR-MHI</option>
            <option value="PR-MHJ">PR-MHJ</option>
            <option value="PR-MHK">PR-MHK</option>
            <option value="PR-MHL">PR-MHL</option>
            <option value="PR-MHM">PR-MHM</option>
            <option value="PR-MHP">PR-MHP</option>
            <option value="PR-MHQ">PR-MHQ</option>
            <option value="PR-MHR">PR-MHR</option>
            <option value="PR-MHU">PR-MHU</option>
            <option value="PR-MHW">PR-MHW</option>
            <option value="PR-MHX">PR-MHX</option>
            <option value="PR-MHZ">PR-MHZ</option>
            <option value="PR-MYA">PR-MYA</option>
            <option value="PR-MYC">PR-MYC</option>
            <option value="PR-MYH">PR-MYH</option>
            <option value="PR-MYI">PR-MYI</option>
            <option value="PR-MYJ">PR-MYJ</option>
            <option value="PR-MYK">PR-MYK</option>
            <option value="PR-MYL">PR-MYL</option>
            <option value="PR-MYM">PR-MYM</option>
            <option value="PR-MYN">PR-MYN</option>
            <option value="PR-MYO">PR-MYO</option>
            <option value="PR-MYP">PR-MYP</option>
            <option value="PR-MYQ">PR-MYQ</option>
            <option value="PR-MYR">PR-MYR</option>
            <option value="PR-MYT">PR-MYT</option>
            <option value="PR-MYV">PR-MYV</option>
            <option value="PR-MYW">PR-MYW</option>
            <option value="PR-MYX">PR-MYX</option>
            <option value="PR-MYY">PR-MYY</option>
            <option value="PR-MYZ">PR-MYZ</option>
            <option value="PR-TQB">PR-TQB</option>
            <option value="PR-TQC">PR-TQC</option>
            <option value="PR-TYA">PR-TYA</option>
            <option value="PR-TYD">PR-TYD</option>
            <option value="PR-TYF">PR-TYF</option>
            <option value="PR-TYH">PR-TYH</option>
            <option value="PR-TYI">PR-TYI</option>
            <option value="PR-TYJ">PR-TYJ</option>
            <option value="PR-TYK">PR-TYK</option>
            <option value="PR-TYL">PR-TYL</option>
            <option value="PR-TYM">PR-TYM</option>
            <option value="PR-TYN">PR-TYN</option>
            <option value="PR-TYO">PR-TYO</option>
            <option value="PR-TYP">PR-TYP</option>
            <option value="PR-TYQ">PR-TYQ</option>
            <option value="PR-TYR">PR-TYR</option>
            <option value="PR-TYS">PR-TYS</option>
            <option value="PR-TYT">PR-TYT</option>
            <option value="PR-TYU">PR-TYU</option>
            <option value="PR-TYV">PR-TYV</option>
            <option value="PR-XBA">PR-XBA</option>
            <option value="PR-XBB">PR-XBB</option>
            <option value="PR-XBC">PR-XBC</option>
            <option value="PR-XBD">PR-XBD</option>
            <option value="PR-XBE">PR-XBE</option>
            <option value="PR-XBF">PR-XBF</option>
            <option value="PR-XBG">PR-XBG</option>
            <option value="PR-XBH">PR-XBH</option>
            <option value="PR-XBI">PR-XBI</option>
            <option value="PR-XBJ">PR-XBJ</option>
            <option value="PR-XBK">PR-XBK</option>
            <option value="PR-XBL">PR-XBL</option>
            <option value="PR-XBM">PR-XBM</option>
            <option value="PR-XBN">PR-XBN</option>
            <option value="PR-XBO">PR-XBO</option>
            <option value="PR-XBP">PR-XBP</option>
            <option value="PR-XBQ">PR-XBQ</option>
            <option value="PR-XBR">PR-XBR</option>
            <option value="PT-MOD">PT-MOD</option>
            <option value="PT-MSO">PT-MSO</option>
            <option value="PT-MSS">PT-MSS</option>
            <option value="PT-MSV">PT-MSV</option>
            <option value="PT-MSW">PT-MSW</option>
            <option value="PT-MSX">PT-MSX</option>
            <option value="PT-MSY">PT-MSY</option>
            <option value="PT-MSZ">PT-MSZ</option>
            <option value="PT-MUA">PT-MUA</option>
            <option value="PT-MUB">PT-MUB</option>
            <option value="PT-MUC">PT-MUC</option>
            <option value="PT-MUD">PT-MUD</option>
            <option value="PT-MUE">PT-MUE</option>
            <option value="PT-MUF">PT-MUF</option>
            <option value="PT-MUG">PT-MUG</option>
            <option value="PT-MUH">PT-MUH</option>
            <option value="PT-MUI">PT-MUI</option>
            <option value="PT-MUJ">PT-MUJ</option>
            <option value="PT-MXA">PT-MXA</option>
            <option value="PT-MXB">PT-MXB</option>
            <option value="PT-MXC">PT-MXC</option>
            <option value="PT-MXD">PT-MXD</option>
            <option value="PT-MXE">PT-MXE</option>
            <option value="PT-MXF">PT-MXF</option>
            <option value="PT-MXG">PT-MXG</option>
            <option value="PT-MXH">PT-MXH</option>
            <option value="PT-MXI">PT-MXI</option>
            <option value="PT-MXJ">PT-MXJ</option>
            <option value="PT-MXL">PT-MXL</option>
            <option value="PT-MXM">PT-MXM</option>
            <option value="PT-MXN">PT-MXN</option>
            <option value="PT-MXO">PT-MXO</option>
            <option value="PT-MXP">PT-MXP</option>
            <option value="PT-MXQ">PT-MXQ</option>
            <option value="PT-MZH">PT-MZH</option>
            <option value="PT-MZL">PT-MZL</option>
            <option value="PT-MZT">PT-MZT</option>
            <option value="PT-MZU">PT-MZU</option>
            <option value="PT-MZW">PT-MZW</option>
            <option value="PT-MZY">PT-MZY</option>
            <option value="PT-MZZ">PT-MZZ</option>
            <option value="PT-TMA">PT-TMA</option>
            <option value="PT-TMB">PT-TMB</option>
            <option value="PT-TMC">PT-TMC</option>
            <option value="PT-TMD">PT-TMD</option>
            <option value="PT-TME">PT-TME</option>
            <option value="PT-TMG">PT-TMG</option>
            <option value="PT-TMI">PT-TMI</option>
            <option value="PT-TML">PT-TML</option>
            <option value="PT-TMO">PT-TMO</option>
            <option value="PT-TMT">PT-TMT</option>
            <option value="PT-TPA">PT-TPA</option>
            <option value="PT-TPB">PT-TPB</option>
            <option value="PT-XPA">PT-XPA</option>
            <option value="PT-XPB">PT-XPB</option>
            <option value="PT-XPC">PT-XPC</option>
            <option value="PT-XPD">PT-XPD</option>
            <option value="PT-XPE">PT-XPE</option>
            <option value="PT-XPF">PT-XPF</option>
            <option value="PT-XPG">PT-XPG</option>
            <option value="PT-XPH">PT-XPH</option>
            <option value="PT-XPI">PT-XPI</option>
            <option value="PT-XPJ">PT-XPJ</option>
            <option value="PT-XPL">PT-XPL</option>
            <option value="PT-XPM">PT-XPM</option>
            <option value="PT-XPN">PT-XPN</option>
            <option value="PT-XPO">PT-XPO</option>
            <option value="PT-XPQ">PT-XPQ</option>
        </select>

        <label for="weight">Peso:</label>
        <input type="text" id="weight" readonly>

        <label for="hoursOnGround">Horas de Solo:</label>
        <input type="text" id="hoursOnGround" placeholder="ex: 5" oninput="validateHoursInput()">
        <div id="hoursError" style="display: none;">Digite um número inteiro</div>

        <button onclick="calcular()">Calcular</button>
        <button onclick="sendData()">Enviar</button>
        <button onclick="clearResults()">Limpar</button>

        <div class="result">
            <h2>Resultados</h2>
            <div id="custoManobra"></div>
            <div id="custoEstadia"></div>
            <div id="economia"></div>
            <div id="fraseEconomia" style="margin-top: 20px;"></div>
        </div>
    </div>

    <script>
        let aeroporto, aeronave, peso, horasSolo;
        let custoManobraResultado, custoEstadiaResultado, economiaResultado, fraseEconomia;

        const boxCriticos = {
            "BSB": "1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 47, 48, 49, 50, 51",
            "GIG": "778, 632R, 752L",
            "CNF": "653R, 123L, 411R",
            "IGU": "5, 6, 7, 8, 9, 10, 11, 12",
            "GRU": "605R, 407, 212R, 605L, 303L, 308, 713, 306, 301R, 209, 302L, 304, 305, 211R, 310, 210, 410R, 312, 303R, 307, 309, 502R, 311, 401, 204R, 504R, 504L, 402L, 208, 112L, 207, 507L, 110L, 505R, 507R, 113R, 511L, 402R, 701, 509R, 508, 509L, 602R, 714, 406, 205R, 506, 202R, 612L, 411L, 204L, 203L, 402, 604, 510, 511, 501, 404, 502L, 409L, 701L, 503, 507, 601, 112R, 605, 607, 206, 201, 509, 702, 113L, 603L, 714R, 714L, 410L, 606L, 606R, 602, 403, 411R, 703, 603, 607L, 105L, 607R, 610, 202L, 715, 604L, 510L, H-03, 212L, 702L, 508L, 606, 715R, 715, 715L, 714, 713R, 713, 713L, 701, 701R, 702, 702R, 703L, 703, 703R, H-01, H-02, H-04, H-05, H-06, H-07, H-08, H-09, H-10, H-11, H-12, H-13, H-14, H-15, H-16, H-17, H-18, H-19, H-20, 612R  , 612, 611R, 611, 611L, 610R, 610, 610L, 609R, 609, 609L, 608R, 608, 608L, 607, 601L  , 601, 601R, 602L, 602, 603, 603R, 604, 604R, 605, 606, 501, 330, 329, 326, 325, 322, 321, 303, 302, 301, 331, 328, 327, 324, 323, 510R, 510, 509, 508R, 508, 507, 405, 261, 260, 262, 263, 264, 266, 267, 268, 259, 258, 256, 255, 250"
        };

        const boxGanhos = {
            "BSB": "11, 11R, 14L",
            "GIG": "22, 42, 43",
            "CNF": "10L, 12R, 14",
            "IGU": "12, 51, 54",
            "GRU": "21, 15, 24"
        };

        function validateId() {
            const validIds = ['3822845', '123456','654321'];
            const userId = document.getElementById('userId').value;
            const errorMessage = document.getElementById('error-message');
            const loginScreen = document.querySelector('.login-screen');
            const dashboard = document.querySelector('.dashboard');

            if (validIds.includes(userId)) {
                errorMessage.style.display = 'none';
                loginScreen.style.display = 'none';
                dashboard.style.display = 'block';
            } else {
                errorMessage.style.display = 'block';
            }
        }

        function updateVariables() {
            aeroporto = document.getElementById('airportSelect').value;
            aeronave = document.getElementById('aircraftSelect').value;
            
            const aircraftWeights = {
                "PR-ABD": 187,  "PR-TYD": 77,  "PT-MXA": 89,
                "PR-ACO": 187,  "PR-TYF": 77,  "PT-MXB": 89,
                "PR-ADY": 187,  "PR-TYH": 77,  "PT-MXC": 89,
                "PR-MAG": 77,  "PR-TYI": 78,  "PT-MXD": 89,
                "PR-MAK": 77,  "PR-TYJ": 78,  "PT-MXE": 89,
                "PR-MBA": 77,  "PR-TYK": 78,  "PT-MXF": 89,
                "PR-MBF": 77,  "PR-TYL": 78,  "PT-MXG": 89,
                "PR-MBG": 74,  "PR-TYM": 78,  "PT-MXH": 89,
                "PR-MBH": 77,  "PR-TYN": 78,  "PT-MXI": 89,
                "PR-MBN": 64,  "PR-TYO": 78,  "PT-MXJ": 89,
                "PR-MBT": 77,  "PR-TYP": 78,  "PT-MXL": 89,
                "PR-MBU": 76,  "PR-TYQ": 78,  "PT-MXM": 89,
                "PR-MBV": 76,  "PR-TYR": 78,  "PT-MXN": 89,
                "PR-MBW": 64,  "PR-TYS": 78,  "PT-MXO": 89,
                "PR-MHA": 77,  "PR-TYT": 78,  "PT-MXP": 89,
                "PR-MHB": 77,  "PR-TYU": 78,  "PT-MXQ": 89,
                "PR-MHE": 70,  "PR-TYV": 78,  "PT-MZH": 77,
                "PR-MHF": 77,  "PR-XBA": 74,  "PT-MZL": 77,
                "PR-MHG": 77,  "PR-XBB": 74,  "PT-MZT": 77,
                "PR-MHI": 70,  "PR-XBC": 74,  "PT-MZU": 77,
                "PR-MHJ": 70,  "PR-XBD": 74,  "PT-MZW": 77,
                "PR-MHK": 77,  "PR-XBE": 74,  "PT-MZY": 77,
                "PR-MHL": 77,  "PR-XBF": 79,  "PT-MZZ": 77,
                "PR-MHM": 77,  "PR-XBG": 79,  "PT-TMA": 76,
                "PR-MHP": 77,  "PR-XBH": 79,  "PT-TMB": 64,
                "PR-MHQ": 77,  "PR-XBI": 79,  "PT-TMC": 64,
                "PR-MHR": 77,  "PR-XBJ": 79,  "PT-TMD": 64,
                "PR-MHU": 77,  "PR-XBK": 79,  "PT-TME": 64,
                "PR-MHW": 77,  "PR-XBL": 79,  "PT-TMG": 76,
                "PR-MHX": 77,  "PR-XBM": 79,  "PT-TMI": 64,
                "PR-MHZ": 77,  "PR-XBN": 79,  "PT-TML": 70,
                "PR-MYA": 77,  "PR-XBO": 79,  "PT-TMO": 70,
                "PR-MYC": 64,  "PR-XBP": 79,  "PT-TMT": 70,
                "PR-MYH": 77,  "PR-XBQ": 79,  "PT-TPA": 76,
                "PR-MYI": 77,  "PR-XBR": 79,  "PT-TPB": 76,
                "PR-MYJ": 77,  "PT-MOD": 187,  "PT-XPA": 89,
                "PR-MYK": 77,  "PT-MSO": 187,  "PT-XPB": 89,
                "PR-MYL": 64,  "PT-MSS": 187,  "PT-XPC": 89,
                "PR-MYM": 64,  "PT-MSV": 187,  "PT-XPD": 89,
                "PR-MYN": 70,  "PT-MSW": 187,  "PT-XPE": 89,
                "PR-MYO": 70,  "PT-MSX": 187,  "PT-XPF": 89,
                "PR-MYP": 77,  "PT-MSY": 187,  "PT-XPG": 89,
                "PR-MYQ": 77,  "PT-MSZ": 187,  "PT-XPH": 89,
                "PR-MYR": 77,  "PT-MUA": 347,  "PT-XPI": 89,
                "PR-MYT": 77,  "PT-MUB": 347,  "PT-XPJ": 89,
                "PR-MYV": 77,  "PT-MUC": 347,  "PT-XPL": 89,
                "PR-MYW": 77,  "PT-MUD": 347,  "PT-XPM": 89,
                "PR-MYX": 77,  "PT-MUE": 347,  "PT-XPN": 89,
                "PR-MYY": 77,  "PT-MUF": 347,  "PT-XPO": 89,
                "PR-MYZ": 77,  "PT-MUG": 347,  "PT-XPQ": 89,
                "PR-TQB": 78,  "PT-MUH": 347, "PR-TQC": 78,
                "PT-MUI": 352,
            };
            peso = aircraftWeights[aeronave] || "";
            document.getElementById('weight').value = peso;
            horasSolo = document.getElementById('hoursOnGround').value;

            if (aeroporto) {
                document.getElementById('boxCriticos').innerText = `BOX Críticos: ${boxCriticos[aeroporto]}`;
                document.getElementById('boxGanhos').innerText = `BOX com ganhos: ${boxGanhos[aeroporto]}`;
            } else {
                document.getElementById('boxCriticos').innerText = '';
                document.getElementById('boxGanhos').innerText = '';
            }
        }

        function validateHoursInput() {
            const input = document.getElementById('hoursOnGround');
            const hoursError = document.getElementById('hoursError');
            if (isNaN(input.value) || input.value.includes('.')) {
                hoursError.style.display = 'block';
            } else {
                hoursError.style.display = 'none';
                horasSolo = input.value;
            }
        }

        function calcular() {
            // Validando se o valor inserido é menor ou igual a 3
            if(parseInt(horasSolo) <= 3){
                alert('Insira um valor maior que 3');
                return;
            }
            
            const custoManobraValores = {
                "BSB": 1.91, "GIG": 1.9854, "CNF": 1.9608, "IGU": 2.76, "GRU": 1.9453
            };
            const custoEstadiaValores = {
                "BSB": 0.4064, "GIG": 0.4215, "CNF": 0.4161, "IGU": 0.59, "GRU": 0.4128
            };
            const custoReboqueValores = {
                "BSB": 316.23, "GIG": 316.23, "CNF": 106.39, "IGU": 189.38, "GRU": 316.23
            };

            const custoManobra = custoManobraValores[aeroporto] * peso * (horasSolo-3);
            const custoEstadia = (custoEstadiaValores[aeroporto] * peso * (horasSolo-3)) + (custoReboqueValores[aeroporto] * 2);
            const economia = custoManobra - custoEstadia;

            custoManobraResultado = custoManobra;
            custoEstadiaResultado = custoEstadia;
            economiaResultado = economia;

            document.getElementById('custoManobra').innerText = `Custo de Manobra: R$ ${custoManobraResultado.toFixed(2)}`;
            document.getElementById('custoEstadia').innerText = `Custo de Estadia: R$ ${custoEstadiaResultado.toFixed(2)}`;
            document.getElementById('economia').innerText = `Economia: R$ ${economiaResultado.toFixed(2)}`;

            fraseEconomia = economiaResultado > 0 ? "MOVIMENTAR PARA POSIÇÃO DE ESTACIONAMENTO" : "PERMANECER EM POSIÇÃO DE MANOBRAS";
            document.getElementById('fraseEconomia').innerText = fraseEconomia;
        }

        function sendData() {
            const scriptURL = 'https://script.google.com/macros/s/AKfycby5cZnfVKc9lQZenRyD_75F-dwjiyvlhyoSCUi1pD0ebLkIylcp8JHgyaRil37aePEB/exec';
            // Formatação dos dados antes do envio

            const formattedData = {
                aeroporto: aeroporto,
                aeronave: aeronave,
                peso: peso,
                horasSolo: horasSolo,
                custoManobra: Number(custoManobraResultado.toFixed(2)),
                custoEstadia: Number(custoEstadiaResultado.toFixed(2)),
                economia: Number(economiaResultado.toFixed(2)),
                fraseEconomia: fraseEconomia
             };

             // Envio dos dados usando fetch
             fetch(scriptURL, {
                method: 'POST',
                body: new URLSearchParams(formattedData)
            }).then(response => {
                if (response.ok) {
                    alert('Dados enviados com sucesso!');
            } else {
                alert('Falha ao enviar os dados.');
            }
            });
}

        function clearResults() {
            document.getElementById('airportSelect').selectedIndex = 0;
            document.getElementById('aircraftSelect').selectedIndex = 0;
            document.getElementById('weight').value = "";
            document.getElementById('hoursOnGround').value = "";
            document.getElementById('custoManobra').innerText = "";
            document.getElementById('custoEstadia').innerText = "";
            document.getElementById('economia').innerText = "";
            document.getElementById('fraseEconomia').innerText = "";
            document.getElementById('boxCriticos').innerText = "";
            document.getElementById('boxGanhos').innerText = "";
        }
    </script>
</body>
</html>